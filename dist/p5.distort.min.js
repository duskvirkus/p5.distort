"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}var Distort=function(){function r(t,e){_classCallCheck(this,r),this.distortFactor=t,this.framesPerCycle=e,this.currentFrame=0,this.elements=[],console.log("p5.distort Started - v0.0.1 - open source p5.js vertex manipulation library created by Fi Graham")}return _createClass(r,[{key:"currentTime",value:function(){return map(this.currentFrame,0,this.framesPerCycle,0,1)}},{key:"addElement",value:function(t){this.elements.push(t)}},{key:"update",value:function(){for(var t=0;t<this.elements.length;t++)this.elements[t].update();this.currentFrame++}},{key:"render",value:function(){for(var t=0;t<this.elements.length;t++)this.elements[t].render()}},{key:"scaleValue",value:function(t){return t-2*this.distortFactor}},{key:"elementIndex",value:function(t){for(var e=0;e<this.elements.length;e++)if(this.elements[e]===t)return e;return-1}}]),r}(),DistortElement=function(){function r(t,e){_classCallCheck(this,r),this.setController(t),this.position=e,this.controller,this.pointGroups=[],this.bounds=[]}return _createClass(r,[{key:"setController",value:function(t){this.controller=t,this.controller.addElement(this)}},{key:"changeController",value:function(t){for(var e=0;e<this.controller.elements.length;e++)this.controller.elements[e]==this&&this.controller.elements.splice(e,1);this.setController(t)}},{key:"update",value:function(){}},{key:"render",value:function(){this.drawingTraits(),beginShape();for(var t=0;t<this.pointGroups.length;t++){0!=t&&beginContour();for(var e=0;e<this.pointGroups[t].length;e++){var r=this.pointGroups[t][e];void 0!==this.transformPoint&&(r=this.transformPoint(this,r)),vertex(r.x,r.y)}0!=t&&endContour()}endShape(this.endTrait())}},{key:"drawingTraits",value:function(){strokeWeight(0),noStroke(),fill(0)}},{key:"setDrawingTraits",value:function(t){this.drawingTraits=t}},{key:"endTrait",value:function(){return CLOSE}},{key:"setTransformPoint",value:function(t){this.transformPoint=t}},{key:"setPosition",value:function(t){for(var e=createVector(this.position.x-t.x,this.position.y-t.y),r=[],i=0;i<this.pointGroups.length;i++){for(var n=[],o=0;o<this.pointGroups[i].length;o++)n.push(createVector(this.pointGroups[i][o].x-e.x,this.pointGroups[i][o].y-e.y));r.push(n)}this.pointGroups=r,this.position=t}},{key:"distanceFromCenter",value:function(t){return dist(t.x,t.y,this.position.x,this.position.y)}},{key:"distanceFromCenterX",value:function(t){return t.x-this.position.x}},{key:"distanceFromCenterY",value:function(t){return t.y-this.position.x}},{key:"getIndex",value:function(){return this.controller.elementIndex(this)}}]),r}(),DistortPolygon=function(t){function o(t,e,r,i){var n;return _classCallCheck(this,o),(n=_possibleConstructorReturn(this,_getPrototypeOf(o).call(this,t,e))).corners=r,n.generatePoints(int(i)),n}return _inherits(o,DistortElement),_createClass(o,[{key:"generatePoints",value:function(t){for(var e=[],r=[],i=0;i<this.corners.length;i++)r.push(int(this.getSide(i)/this.getPerimeter()*t));for(var n=0;n<r.length;n++){var o=n+1;o>=this.corners.length&&(o=0);for(var s=0;s<r[n];s++){var h=lerp(this.corners[n].x,this.corners[o].x,s/float(r[n])),a=lerp(this.corners[n].y,this.corners[o].y,s/float(r[n]));e.push(createVector(h+this.position.x,a+this.position.y))}}this.pointGroups.push(e)}},{key:"getSide",value:function(t){return this.controller.scaleValue(this.calculateSide(t))}},{key:"calculateSide",value:function(t){if((t=int(t))>=this.corners.length&&0<=t)throw new Error("calculateSide() expects a number between 0 and "+this.corners.length-1+". It was given "+t+".");var e=t<this.corners.length-1?t+1:0;return dist(this.corners[t].x,this.corners[t].y,this.corners[e].x,this.corners[e].y)}},{key:"getPerimeter",value:function(){for(var t=0,e=0;e<this.corners.length;e++)t+=this.getSide(e);return t}}]),o}(),DistortLine=function(t){function o(t,e,r,i,n){if(_classCallCheck(this,o),n<2)throw new Error("Distort Line requires a minimum of 2 for the detail value");return _possibleConstructorReturn(this,_getPrototypeOf(o).call(this,t,e,[r,i],n))}return _inherits(o,DistortPolygon),_createClass(o,[{key:"endTrait",value:function(){}}]),o}(),DistortEllipse=function(t){function s(t,e,r,i,n){var o;return _classCallCheck(this,s),(o=_possibleConstructorReturn(this,_getPrototypeOf(s).call(this,t,e))).width=r,o.height=i,o.generatePoints(n),o}return _inherits(s,DistortElement),_createClass(s,[{key:"generatePoints",value:function(t){for(var e=[],r=0;r<t;r++){var i=map(r,0,t,0,TWO_PI),n=this.getWidth()/2*cos(i),o=this.getHeight()/2*sin(i);e.push(createVector(n+this.position.x,o+this.position.y))}this.pointGroups.push(e)}},{key:"getWidth",value:function(){return this.controller.scaleValue(this.width)}},{key:"getHeight",value:function(){return this.controller.scaleValue(this.height)}}]),s}(),DistortRectangle=function(t){function s(t,e,r,i,n){var o;return _classCallCheck(this,s),(o=_possibleConstructorReturn(this,_getPrototypeOf(s).call(this,t,e))).width=r,o.height=i,o.generatePoints(n),o}return _inherits(s,DistortElement),_createClass(s,[{key:"generatePoints",value:function(t){for(var e=[],r=int(this.getWidth()/(this.getWidth()+this.getHeight())*t)/2,i=(t-2*r)/2,n=0;n<r;n++){var o=map(n,0,r,-this.getWidth()/2,this.getWidth()/2),s=-this.getHeight()/2;e.push(createVector(o+this.position.x,s+this.position.y))}for(var h=0;h<i;h++){var a=this.getWidth()/2,l=map(h,0,i,-this.getHeight()/2,this.getHeight()/2);e.push(createVector(a+this.position.x,l+this.position.y))}for(var u=0;u<r;u++){var c=map(u,0,r,this.getWidth()/2,-this.getWidth()/2),f=this.getHeight()/2;e.push(createVector(c+this.position.x,f+this.position.y))}for(var p=0;p<i;p++){var y=-this.getWidth()/2,g=map(p,0,i,this.getHeight()/2,-this.getHeight()/2);e.push(createVector(y+this.position.x,g+this.position.y))}this.pointGroups.push(e)}},{key:"getWidth",value:function(){return this.controller.scaleValue(this.width)}},{key:"getHeight",value:function(){return this.controller.scaleValue(this.height)}}]),s}(),DistortTriangle=function(t){function s(t,e,r,i,n,o){if(_classCallCheck(this,s),o<6)throw new Error("Distort Triangle requires a minimum of 6 for the detail value");return _possibleConstructorReturn(this,_getPrototypeOf(s).call(this,t,e,[r,i,n],o))}return _inherits(s,DistortPolygon),s}(),DistortQuad=function(t){function h(t,e,r,i,n,o,s){if(_classCallCheck(this,h),s<8)throw new Error("DistortQuad requires a minimum of 8 for the detail value");return _possibleConstructorReturn(this,_getPrototypeOf(h).call(this,t,e,[r,i,n,o],s))}return _inherits(h,DistortPolygon),h}(),DistortString=function(t){function s(t,e,r,i,n){var o;return _classCallCheck(this,s),(o=_possibleConstructorReturn(this,_getPrototypeOf(s).call(this,t,e,n))).font=r,o.string=i,o.size=n,o.distanceThreshold=3,o.generateBounds(),o.generatePoints(),o.setPosition(createVector(e.x,e.y)),o}return _inherits(s,DistortElement),_createClass(s,[{key:"generatePoints",value:function(){var t=this.font.textToPoints(this.string,this.position.x-this.bounds.w/2-this.bounds.advance,this.position.y+this.bounds.h/2,this.getSize(),{sampleFactor:1,simplifyThreshold:0}),e=[];0<t.length&&e.push(t[0]);for(var r=1;r<t.length;r++)this.differentShape(t,r)&&(this.pointGroups.push(e),e=[]),e.push(t[r]);this.pointGroups.push(e)}},{key:"differentShape",value:function(t,e){return!(e<=0||e>t.length-1)&&dist(t[e-1].x,t[e-1].y,t[e].x,t[e].y)>this.distanceThreshold}},{key:"generateBounds",value:function(){this.bounds=this.font.textBounds(this.string,this.position.x,this.position.y,this.getSize()),this.position=createVector(this.position.x-this.bounds.x/2,this.position.y-this.bounds.y/2)}},{key:"getSize",value:function(){return this.controller.scaleValue(this.size)}}]),s}(),PERLIN_NOISE=function(t,e){var r=t.distanceFromCenterX(e),i=t.distanceFromCenterY(e),n=t.controller.currentTime()*TWO_PI,o=.01*t.controller.currentFrame+t.getIndex()*t.controller.framesPerCycle;return createVector(e.x+map(noise(r*cos(n)*.01,r*sin(n)*.01,o),0,1,-t.controller.distortFactor,t.controller.distortFactor),e.y+map(noise(i*cos(n)*.01,i*sin(n)*.01,o),0,1,-t.controller.distortFactor,t.controller.distortFactor))};