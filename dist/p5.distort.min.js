"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var DistortCircle=function(t){function n(t,e,i,s){var o;return _classCallCheck(this,n),(o=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this,t,e,i))).generatePoints(s),o}return _inherits(n,DistortElement),_createClass(n,[{key:"generatePoints",value:function(t){for(var e=[],i=0;i<t;i++){var s=map(i,0,t,0,TWO_PI),o=this.radius()*cos(s),n=this.radius()*sin(s);e.push(createVector(o+this.position.x,n+this.position.y))}this.pointGroups.push(e)}},{key:"radius",value:function(){return this.scaledSize()/2}}]),n}(),Distort=function(){function i(t,e){_classCallCheck(this,i),this.distortFactor=t,this.framesPerCycle=e,this.currentFrame=0,this.elements=[]}return _createClass(i,[{key:"addElement",value:function(t){this.elements.push(t)}},{key:"update",value:function(){for(var t=0;t<this.elements.length;t++)this.elements[t].update();this.currentFrame++}},{key:"render",value:function(){for(var t=0;t<this.elements.length;t++)this.elements[t].render()}}]),i}(),DistortElement=function(){function s(t,e,i){_classCallCheck(this,s),this.setController(t),this.position=e,this.size=i,this.offset=0,this.controller,this.pointGroups=[],this.bounds=[]}return _createClass(s,[{key:"setController",value:function(t){this.controller=t,this.controller.addElement(this)}},{key:"sectionSize",value:function(){return this.size/3}},{key:"updateOffset",value:function(){this.offset=map(this.controller.currentFrame,0,this.controller.framesPerCycle,0,this.sectionSize())}},{key:"update",value:function(){this.updateOffset()}},{key:"render",value:function(){this.drawingTraits(),beginShape();for(var t=0;t<this.pointGroups.length;t++){0!=t&&beginContour();for(var e=0;e<this.pointGroups[t].length;e++){var i=this.pointGroups[t][e];i=this.transformPoint(i),vertex(i.x,i.y)}0!=t&&endContour()}endShape(CLOSE)}},{key:"calculateProgress",value:function(t){return map(t.x+this.offset%this.sectionSize(),0,this.sectionSize(),0,TWO_PI)}},{key:"drawingTraits",value:function(){noStroke(),fill(0)}},{key:"setDrawingTraits",value:function(t){this.drawingTraits=t}},{key:"transformPoint",value:function(t){var e=this.calculateProgress(t);return createVector(t.x,t.y+map(sin(e),-1,1,-this.size/this.controller.distortFactor,this.size/this.controller.distortFactor))}},{key:"setTransformPoint",value:function(t){this.transformPoint=t}},{key:"scaledSize",value:function(){return this.size-this.size/this.controller.distortFactor*2}},{key:"setPosition",value:function(t){for(var e=createVector(this.position.x-t.x,this.position.y-t.y),i=[],s=0;s<this.pointGroups.length;s++){for(var o=[],n=0;n<this.pointGroups[s].length;n++)o.push(createVector(this.pointGroups[s][n].x-e.x,this.pointGroups[s][n].y-e.y));i.push(o)}this.pointGroups=i,this.position=t}}]),s}(),DistortString=function(t){function r(t,e,i,s,o){var n;return _classCallCheck(this,r),(n=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,t,o,s))).font=e,n.string=i,n.distanceThreshold=3,n.generateBounds(),n.generatePoints(),n}return _inherits(r,DistortElement),_createClass(r,[{key:"generatePoints",value:function(){var t=this.font.textToPoints(this.string,this.position.x-this.bounds.w/2-this.bounds.advance,this.position.y+this.bounds.h/2,this.scaledSize(),{sampleFactor:1,simplifyThreshold:0}),e=[];0<t.length&&e.push(t[0]);for(var i=1;i<t.length;i++)this.differentShape(t,i)&&(this.pointGroups.push(e),e=[]),e.push(t[i]);this.pointGroups.push(e)}},{key:"distanceLog",value:function(t){for(var e=1;e<this.points.length;e++){var i=dist(this.points[e-1].x,this.points[e-1].y,this.points[e].x,this.points[e].y);(t||i>this.distanceThreshold)&&console.log(i)}}},{key:"differentShape",value:function(t,e){return!(e<=0||e>t.length-1)&&dist(t[e-1].x,t[e-1].y,t[e].x,t[e].y)>this.distanceThreshold}},{key:"generateBounds",value:function(){this.bounds=this.font.textBounds(this.string,this.position.x,this.position.y,this.scaledSize()),this.position=createVector(this.position.x-this.bounds.x/2,this.position.y-this.bounds.y/2)}}]),r}();